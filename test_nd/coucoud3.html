<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- http://www.basscss.com/ -->
    <link href="https://unpkg.com/basscss@8.0.2/css/basscss.min.css" rel="stylesheet">
    <!-- http://clrs.cc/ -->
    <!-- <link href="//s3-us-west-2.amazonaws.com/colors-css/2.2.0/colors.min.css" rel="stylesheet"> -->
    <style>
        body { font-family: Consolas, monaco, monospace; padding-left: 20px;}
        .js-circle {
            background: #eee;
            position: relative;
            margin: 3px;
            width: 320px;
            height: 360px;
            padding-left: 8px;
        }
        span {
            color: #888;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
    </style>
</head>
<body>
    <header>
    </header>
    
    <div id="vis" class="flex flex-wrap max-width-1600 mx-auto my2 js-circles"></div>

<script src="https://d3js.org/d3.v5.min.js"></script>
<!-- d3 code -->

<script>
    
	var width = 960;
    var height = 500;
	var system_cx = 300;
	var system_cy = 300;
	var cumulative_r = 0;
	var inter_circle = 12;
	var sun_w = 30;
	var planet_r = 5;
	var circle_w = 0.1;
	var n_circle = 10;
	
	ttime = 0
	var timestep = 1000


	var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);


	(function circleTransition() { 

		var timeCircle = svg.append("circle")
			.attr("fill", "black")
			.attr("cx", system_cx)
    		.attr("cy", system_cx)
			.attr("r", sun_w);

		(function repeat() {
		timeCircle
			.attr("cx", system_cx)
    		.attr("cy", system_cx)
			.transition()
			.ease(d3.easeSin)
			.duration(1000)
			.attr("r", sun_w + 2)
			.transition()
			.ease(d3.easeSin)
			.duration(1000)
			.attr("r", sun_w)
			.on("end", repeat);
		})();
	sun_w = sun_w
	})();

	
	cumulative_r+=sun_w + inter_circle

	var streamer_planets = []
	var timepos = ttime/timestep
	
	for(i=0;i<n_circle;i++){


	var arc = 


	streamer_planets[i] = {
		"_svg": svg.append("circle")
			.attr("cx", system_cx + (cumulative_r+inter_circle)*Math.cos(timepos))
			.attr("cy", system_cx + (cumulative_r+inter_circle)*-Math.sin(timepos))
			.attr("r", planet_r),
			
		"_svg_ring" : svg.append("circle")
			.attr("cx", system_cx)
			.attr("cy", system_cx)
			.attr("r", cumulative_r)
			.style("stroke-width", circle_w)
			.style("stroke", "grey")
			.style("fill", "none"),
		
		<!-- "arc" : d3.arc() -->
			<!-- .innerRadius(cumulative_r-planet_r*0.6) -->
			<!-- .outerRadius(cumulative_r+planet_r*0.6) -->
			<!-- .startAngle(0) -->
			<!-- .endAngle(timepos), -->
			
		<!-- "_svg_arc" : svg.append("path") -->
		<!-- .attr("d", arc) -->
		<!-- .attr("transform", "translate(300, 300)"), -->
		
		"r_pos" : cumulative_r}


	cumulative_r+=circle_w + inter_circle
	}

	(function streamPlanetTransition() { 

		<!-- var planet = svg.append("circle") -->
		<!-- .attr("cx", system_cx + (cumulative_r+inter_circle)*Math.cos(timepos)) -->
		<!-- .attr("cy", system_cx + (cumulative_r+inter_circle)*-Math.sin(timepos)) -->
		<!-- .attr("r", planet_r); -->

		(function repeat() {	
		var timepos = ttime/timestep
		
		
		for(i=0;i<n_circle;i++){
			<!-- streamer_planets[i].arc.endAngle(timepos) -->
		
			streamer_planets[i]._svg
				.transition()
				.duration(2)
				.attr("r",timepos)
				.attr("cx", system_cx + (streamer_planets[i].r_pos)*Math.cos(timepos*(n_circle-i)*0.5))
				.attr("cy", system_cx + (streamer_planets[i].r_pos)*-Math.sin(timepos*(n_circle-i)*0.5))
				.on("end", repeat);
				
			<!-- streamer_planets[i]._svg_arc -->
				<!-- .transition() -->
				<!-- .duration(2) -->
				<!-- .attr("d", streamer_planets[i].arc) -->
				<!-- .on("end", repeat); -->
		}
		ttime++
		})();

	})();

<!-- ttime++ -->

</script>

</body>
</html>